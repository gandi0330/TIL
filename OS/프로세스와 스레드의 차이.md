# 프로세스와 스레드 차이

### 요약

스레드는 프로세스 안에 포함되어있다. 프로세스는 운영체제로부터 자원을 할당받는 작업의 단위이며, 스레드는 할당받은 자원을 이용하는 실행의 단위이다. 운영체제가 프로세스에게 Code, Data, Stack, Heap 메모리 영역을 할당해 준 후 프로세스는 다른 프로세스의 자원을 일반적으로는 접근할 수 없다. 하지만 스레드는 프로세스 내에서 각 스레드가 가진 stack 영역을 제외한 다른 메모리 영역을 같은 프로세스 내 다른 스레드와 공유한다.

프로세스는 다른 프로세스와 정보를 공유하려면 IPC를 사용하는 등의 번거로운 과정을 거쳐야 하지만, 스레드는 메모리를 공유하기 때문에 정보 공유가 쉽다. 때문에 하나의 일을 처리하는데 멀티 프로세스보다 멀티 스레드가 자원을 아낄 수 있다.  하지만 스레드끼리 자원을 공유하는 만큼 동기화에 대한 문제를 잘 대응해야 한다.

<br>
<br>

### 프로그램(Program)

- 사전적 의미
    - 어떤 작업을 위해 실행할 수 있는 파일
    - 파일이 저장 장치에 저장되어 있지만 메모리에 올라가 있지 않은 정적인 상태
    - 아직 운영체제가 프로그램에게 독립적인 메모리 공간을 할당해주지 않은 상태

프로그램은 파일이 저장 장치에 저장되어 있지만 메모리에 올라가 있지 않은 정적인 상태의 파일로  아직 실행되지 않은 파일 그 자체이다. 윈도우의 .exe 파일이나 MacOS의 .dmg 파일 등 , 사용자가 눌러서 실행하기 전의 파일(코드 덩어리)이다.

이 프로그램에 의미를 부여하기 위해서는 프로그램을 실행해야 한다.

프로그램을 실행하면 컴퓨터 메모리에 해당 파일을 올리는데 이 상태를 동적인 상태라고 하며 이 상태의 프로그램을 프로세스라고 한다.

<br>
<br>

### 프로세스(Process)

- 사전적 의미
    - 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램
    - 메모리에 올라와 실행되고 있는 프로그램의 인스턴스(독립적인 개체)
    - 운영체제로부터 시스템 자원을 할당받는 작업의 단위
    - 즉, 동적인 개념으로는 실행된 프로그램을 의미
- 할당받는 시스템 자원의 예
    - CPU 시간
    - 운영되기 위해 필요한 주소 공간
    - Code, Data, Stack, Heap의 구조로 되어있는 독립된 메모리 영역
- 특징
    - 프로세스는 각각 독립된 메모리 영역(Code, Data, Stack, Heap)을 할당 받는다
    - 기본적으로 프로세스 당 최소 1개의 스레드를 가지고 있다
    - 각 프로세스는 별도의 주소 공간에서 실행되며, 일반적으로 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근할 수 없다.
    - 한 프로세스가 다른 프로세스의 자원에 접근하려면 다음과 같은 방법이 필요하다
        - IPC, inter-process communication
        - LPC, Local inter-Process Communication
        - 별도의 공유 메모리 두기


과거에는 프로그램을 실행할 때부터 끝까지 프로세스 하나만을 사용해서 진행했다. 하지만 프로그램이 점점 복잡해지고 프로세스 하나만으로는 프로그램을 실행하기 힘들어 졌다. 이를 위해 생각한 방법으로는 프로세스 여러개로 하나의 작업을 하는 것이다. 이를 멀티 프로세싱이라 하며 큰 단점은 프로세스는 각각의 독립된 메모리 영역을 받았기 때문에 프로세스 사이에서 공유하는 메모리가 없어서 프로세스끼리의 통신에 많은 오버헤드가 생기게 된다.  

그래서 프로세스보다 더 작은 실행 단위가 필요했고 이것이 스레드이다.

<br>
<br>

### 스레드(Thread)

스레드는 프로세스와 다르게 스레드 간 메모리를 공유한다. 스레드끼리 자원을 공유하며 프로세스 실행 흐름의 일부가 된다. 

- 사전적 의미
    - 프로세스 내에서 실행되는 여러 흐름의 단위
    - 프로세스의 특정한 수행 경로
    - 프로세스가 할당받은 자원을 이용하는 실행 단위
- 특징
    - 스레드는 프로세스 내에서 각각 Stack만 따로 할당받고 Code, Data, heap 영역은 공유한다
    - 스레드는 한 프로세스 내에서 동작되는 여러 실행의 흐름으로, 프로세스 내의 주소공간이나 자원들을 같은 프로세스 내에 스레드끼리 공유하면서 실행된다
    - 따라서 한 스레드가 프로세스 자원을 변경하면 다른 이웃 스레드도 그 변경 결과를 즉시 볼 수 있다.
        
